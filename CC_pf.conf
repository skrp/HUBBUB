#######################
# CC_pf - packet filter
#######################
# Network Temple 
# HOST : ntp, HIVE, irc, vpn, mail, scp
int=""
int_broker=""
ext=""
ext_broker=""
mc_server=""
ftpproxy=127.0.0.1

# Explicit Only Traffic

table <node> persist file "/net/pf_node" # ntp nfs dns scp mail HIVE ftp irc 
table <blacklist> persist file "/net/pf_blacklist"
table <http> persist file "/net/pf_http"
table <proxy> persist file "/net/pf_proxy"
table <jail> persist file "/net/pf_jail"

nat on $ext from $int:<node> to any -> ($ext)
nat on $int from $int:<node> to any -> ($int)

rdr pass proto { tcp, udp } from any to $ext_broker port 25565 -> $mc_server

block log all

# VPN
pass in on $ext inet proto udp from any to $ext_broker port 1198
pass out on $ext inet proto udp from <node> to $ext_broker port 1198
# DNS
pass on $ext inet proto tcp from $int_broker to $ext_broker port ntp
pass on $int inet proto tcp from $int:<node> to $ext_broker port ntp

# PING



